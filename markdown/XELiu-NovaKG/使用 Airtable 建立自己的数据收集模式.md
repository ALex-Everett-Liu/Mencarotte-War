- [huhuhang](https://sspai.com/u/huhuhang/updates)
    - [2018年01月20日](https://sspai.com/post/42918)
- 如今，数据已经被称之为[信息时代]的「黄金」，个人可以通过数据来[量化自我]([[quantified self movement]])，公司可以使用数据来[帮助决策]。[互联网服务商]可以通过[收集用户数据][提供更加个性化的服务]，我们也可以[收集自己的数据]来[优化自己的生活方式](((RMIHLDH89)))。
    - 近一年来，我[开始意识到][自己作为][数据发生器]([[data generator]])的[重要性]，于是就开始[下意识地][集中收集自己产生的各类数据]，建立自己的[数据收集模式]。而谈到为什么要[集中收集个人数据]，[主要原因]应该有两点：
210424-18:40
        - 目前使用了 [Moves](https://sspai.com/post/38142)，[RescueTime](https://www.rescuetime.com/)，[Toggl](https://toggl.com/) 等[各类应用来]收集自己的[地理位置]、[时间消耗][等数据]。但是[这些数据]都[储存于][单独的应用]之上，过于分散。
        - 自己看得见，[摸得着]的数据，比[放在别人的服务器上][更放心]，也更容易集中加以利用。
    - 集中收集数据，意味着 Moves，RescueTime 等应用变成了[纯粹的收集工具]，而数据会[汇总到自己手中]。[不同类型的数据]一旦[汇集到一起]，不仅可以针对[单一类别数据]进行[可视化展示]，还能分析出数据[直接的关联性]，对自己的行为[更具有指导意义]。
- ## 选择一款云端表格工具
    - 数据收集的[末端]，[对应着]用于[存储数据]的[数据库]。当然，对于[个人数据收集]而言，我们常说的[电子表格]其实就足够了。[最让大众熟知的][电子表格工具]一定是 [[Microsoft Excel]] 。但是，作为一款[桌面软件]，Excel 往往并不适用于现代的[数据收集流程]([[data collection]])。例如，你想将你的微博[存档保留]，难道是通过[手动复制粘贴到] [Excel 文档]中吗？显然不太实际。
210424-19:07
        - 所以，如果我们有一个[放在云端的][电子表格]，[可想象的空间]就大很多了。说到云端电子表格，不得不再次提到 Excel，只不过这次是它的[孪生兄弟] [Excel Online](https://office.live.com/start/Excel.aspx)，作为 [[Office 365]] 的套件之一，Excel Online 除了[无法处理宏命令]，[其他方面][几乎就是][桌面版 Excel] 的[完美克隆]。
        - 相比之下，[本文的主角] [Airtable](https://sspai.com/app/Airtable) 的[名气就远不及] Excel 了。但是，[作为一个典型的][硅谷公司产品]，[[Airtable]] 也[拥有不错的口碑]。此外，[[Google Sheets]] 也是优秀的[云端表格工具]，只是[这朵云][离我们稍微远了一些]。
210424-19:19
    - 那么，对于这三款[相对优秀的]云端电子表格，[到底哪一款更加适合用于][个人数据收集整理]呢？我做了一个对比。
        - 当我选择的时候，[最看重的功能]其实是 [API 支持]。只有具备了 [API 接口]([[API interface]])，才能让[数据收集流程]可以[实现自动化](((h7upWPli3)))，也才是[名副其实的]「云端表格」。而让我[最终选择] Airtable 的原因，应该有如下几点：
210424-19:28
            - [基础功能]同另外的两个产品相比[没有明显的缺失]，甚至拥有像[条码输入]、[iframe 嵌入](((6SzHulLXZ)))等更多[差异化功能]。
            - Airtable 同时支持 [IFTTT](https://sspai.com/app/IFTTT) 和 [Zapier](https://sspai.com/search/article?q=Zapier) [云端自动化工具]，且 API 使用起来更简单方便。很多时候，就算[使用现有工具][无法满足需求]，也可以[根据开发者文档][自行编写代码][实现数据读取和写入]。
            - Airtable [外观设计]更加漂亮，这一点[在长时间的使用过程中]非常重要。
- ## Airtable 使用简介
    - 在[正式介绍][我是如何使用] Airitable [集中整理数据]之前，我想先对 Airtable [做一个简单介绍]。
    - 如下图所示，Airtable 主要包含有 6 个[基本组件]，分别是：
        - ![Airtable-01](https://cdn.sspai.com/2018/01/20/ce9ec4e7f58ed58552e8f16a8e5ee827.png)
        - Bases（数据库）：Airtable [数据储存][组成单元]，你可以在[用户主界面][创建不同的数据库]([[database]])。
        - Tables（数据表）：Bases 数据库的[组成单元]，一个数据库中可以[创建多个数据表]([[table]])，且[同一个数据库中的]数据表之间可以形成[数据关联]。
        - Views（视图）：Tables 的不同[展示方式]，默认为表格，还有日历、[表单][等额外的] 4 种[样式]。[视图]([[view]])使得[展示效果][更加丰富]，一个[写满日程的]数据表，显然使用[日历视图]([[calendar view]])[更加直观]。
        - Fields（字段）：Tables 中的[列属性]，与[常见的电子表格][不一样的地方在于]，Airtable 的[字段]([[field]])[可包含]像[条形码]、评分、复选框、附件等[更个性化的格式]。
        - Records（记录）：Tables 中的[行属性](((RWoVY27wc)))，也就是数据表中的数据。
        - Blocks（模块）：[Beta 功能]，提供像[数据概览]、数据可视化、计时器、[发送短信]等[拓展模块]。[模块功能]目前[仍然在内测过程中]，仅 [Pro 版的付费用户]可以[申请使用]。
210424-19:37
    - 可以看出，Airtable [从诞生之初就具备了][关系型数据库]([[relational database]])的样子，[已经满足了]对[数据储存]的[日常需求]。从功能上，除了 Excel Online，基本上[没有竞品]。
    - 要想对[个人数据]进行[集中收集整理]，首先需要在 Airtable [创建不同的数据库]。[建立数据库]是[个人数据收集工程]中的第一步，所以并不是[随意乱建]的。其中，我们需要[先想一想]收集数据的大类，然后在[细分大类中的小类]，并对应到数据表中。我的数据库主要有下面 3 个，[树形结构](https://cdn.sspai.com/2018/01/20/58d8d088557c858d6eaac887e060f95d.jpg)如图所示。
210424-21:20
- ## 工作学习数据库
    - 工作学习数据库会收集[平常我在工作或者学习中][产生的相关数据]。根据我的[使用习惯]，数据库包含了 4 张数据表，分别是：Calendar、Todoist、Trello 以及 Issues（同步 Github）。[看到名字应该就很容易明白]这 4 张表的意思了。
    - 对于这四类服务的数据，我均是采用 [[IFTTT]] 或者 [[Zapier]] [将其同步到] Airtable 中。这里补充介绍一下 IFTTT 和 Zapier 的区别与联系。首先，二者都是[整合不同应用提供的][开发者 API] [实现自动化流程](((S80DmwfLR)))的[云端服务]，这是他们的相同之处。但是，Zapier 相对于 IFTTT 会[更强大一些]，它[一般情况下]会支持[原服务][更全面的 API 接口]，且[支持多个服务联动](((qo9UpGgIM)))。相比之下，IFTTT [很多时候][只提供主要的接口]，且只支持[两个服务之间的数据传递]。
        - 举个例子，当我在使用 Zapier 实现 [[Google Calendar]] → Airtable 的过程中，Zapier 支持读取 Google Calendar 中的 43 项数据（虽然[有一些不实用]），但 IFTTT 只支持 8 个。当然，IFTTT 也有比 Zapier 好用的时候。比如将 [[Todoist]] 完成任务同步到 Airtable 时，Zapier 不支持[监测]任意 Project 下完成的任务，需[针对每个 Project] [设置单独的流程]。
210424-21:29
    - 四个服务同步到 Airtable 的设置[都大同小异]，这里我只拿 Todoist → Airtable [详细说明]。当我选择 IFTTT 作为 Todoist → Airtable 的[同步工具]时，首先需要到 IFTTT 上看一看其支持读取 Todoist 的哪些数据，你可以通过创建动作时查看。
        - 我们可以看到从 Todoist → Airtable 一共支持 7 个类别的数据。那么，现在可以先[新建这个动作]。注意，你[需要遵守] IFTTT 制定的[语法格式]，才能[正确地将数据写入到] Airtable 中。
        - 也就是说，如果要将这 7 类数据[全部同步到] Airtable，你需要在 [IFTTT 动作]的最后[输入如下所示的内容]。我习惯之间使用 IFTTT 的 ingredient 名称作为 Airtable 中的[列名称]。
            - 格式： `::airtable::Airtable 中的列名::{{IFTTT 中的 ingredient}}`
            - 示例内容：
                - ```clojure
::airtable::TaskContent::{{TaskContent}} 
::airtable::LinkToTask::{{LinkToTask}} 
::airtable::Project::{{Project}} 
::airtable::Labels::{{Labels}} 
::airtable::Priority:: {{Priority}} 
::airtable::CompletedAt::{{CompletedAt}}
::airtable::DueDate::{{DueDate}}```
        - 接下来，就可以到 Airtable 中[设置相应的列名称]了。在[设置对应的列属性]（文本、数字、图片等）时，我建议一开始统一设置为「Single line text」，也就是[单行文本格式]，以防止[导入数据出错]。
        - 当测试[导入成功]之后，就可以[调整列属性]。例如这里，Project 的数量是有限的，且[每个任务][只对应一个 Project]。就可以[将其列属性设定为] [[single select]]（单选），这样也[方便日后][对任务进行筛选]。同样，日期可以使用 [Date 属性]，链接使用 URL 等。
            - ![Airtable-02](https://cdn.sspai.com/2018/01/20/c78bedf072b3dff459cdef04dee8f7ae.png)
            - 如果调整列属性之后，表格[显示为空白或报错]，那就意味着[通过 IFTTT 传过来的][数据格式]并不能很好地被 Airtable 支持。比如这里的 `CompletedAt`，也就是[项目的完成日期] + 时间。IFTTT 输出的数据格式是像这样的 `January 20, 2018 at 10:18AM`，Airtable 无法之间将其转换为对应的「日期+时间」的格式。
                - [为了方便之后的][数据分析]，我们其实[更偏向于][将其处理成时间序列]，也就是按 Airtable 中的「日期+时间」格式保存。此时，我们可以通过[新建中间列][作为过渡]，然后利用 Airtable 的 [Formula 公式]将原[文本列][转换为可识别的]「日期+时间」列。具体步骤如下： #formula
210424-21:38
                    - 明确区别： 原[文本列格式]为 `January 20, 2018 at 10:18AM`，Airtable [可识别的格式]为 `January 20, 2018 10:18 AM`。[注意观察][二者之间的区别]，文本格式多了 `at + 一个空格` 字符，同时 AM 字符前[缺少一个空格]。
                    - [格式转换]：[明白区别之后]就可以开始使用 Airtable 提供的 Formula 公式[转换格式]([[convert the format]])。首先是[去掉 at 字符]，然后在结尾的 AM 或者 PM 前面[增加空格]。
                - 这里使用了 `SEARCH()` 函数去[定位要修改的位置]，然后使用 `REPLACE()` 函数[修改字符]。最后再使用 `DATATIME_FOMRMAT()` 函数[格式化字符串]为我们想要的「日期-时间」样式。一个小的技巧是，如果你嫌[增加的中间列]较多，那么可以使用 Airtable [顶部菜单]的 Hide fields 选项[隐去不必要的列]，[只呈现我们需要的]数据即可。
210424-21:54
- ## 量化自我数据库
    - 我的第二个[主要数据库]为量化自我数据库，它是由：Moves、Location、Apple Health、RescueTime 以及 Commute 等 5 个数据表组成。这 5 个数据表分别对应着 Moves 记录的[地理位置数据]、[手动签到]数据、[[Apple Health]] 记录的[运动健康数据]、[[RescueTime]] 记录的[工作效率数据]以及[通勤时间统计数据]。
    - ### Moves 数据
        - [[App/Moves]] 是我一直在使用的[地理位置追踪应用](((zGaSETqhX)))，它的[运动状态识别]和[地点识别][做的非常好]，以至于[现在都没有找到][可替代的应用]。Moves 其实[拥有完善的 API]，但由于其[认证方式的特殊性]，IFTTT 和 Zapier 都[尚未支持][与 Moves 连接]。于是，我只能自己编写一个 Moves → Airtable 的[脚本]，然后[部署在云服务器上]，[每天自动将昨天产生的数据]同步的 Airtable 中去。
        - [实现的过程][比较麻烦]，都能[凑够一篇文章]了，另找时间再细说。这里，Moves 的数据包含有[经纬度信息](((g10HqiJPs)))，你可以直接使用 Airtable 提供的 [Map Block 模块][对地理位置可视化]。
210424-22:02
            - 因[涉及个人隐私]，此处使用[官方示意图]
            - 关于 Airtable Blocks 的[更多介绍]，可以阅读[官方的文章]《[Getting started with Airtable blocks](https://support.airtable.com/hc/en-us/articles/115013403608)》
    - ### Location 数据
        - 除了使用 Moves [自动记录][地理位置信息]，我还[自己制作了一个][辅助签到]的 [[iOS/Workflow]] [用来标记][我认为重要的地点]，并把[地理位置数据][实时上传到] Airtable 中的 Location 数据表中。
            - Workflow 非常简单，流程如下：定位 → 解析数据 [街道 - 城市 - 地区 - 国家] → 解析数据 [经度 - 纬度 - 高度] → [结合当前时间][一并上传到] Airtable 中。
    - ### Apple Health 数据
        - 目前，[追踪健康信息]主要是使用 [[Apple Watch]] 和 [[iPhone]]，通过[本身的健康应用]以及配合 Moves，[Autosleep] 等[第三方应用]完成。Apple Health 无法实现 [iCloud 同步]([[iCloud]])，更没有 [API 支持]，所以只能[半自动同步]到 Airtable。我[采用的方法是]定期从 Apple Health 中[导出数据文件到] [[Dropbox]] 中，Dropbox 的[数据压缩包]会[自动同步到云服务器中]，再由[云服务器中部署的] [Python 脚本][自动完成数据解析]，并[通过 API 同步到] Airtable 的表格中去。
210424-22:11
    - ### RescueTime 数据
        - [工作效率记录]我会使用到 RescueTime 应用，RescueTime 会[自动记录]各类程序的[前台运行时间]，再和数据库进行比对得到[相应应用]属于[效率应用]还是[非效率应用]，从而[自动统计][每天的工作效率]。
        - RescueTime 的数据同步到 Airtable 就比较方便了，可以使用 IFTTT，Zapier 或者[开发者接口]同步。我选择的是 Zapier，因为它可以同步多达 59 项[数据信息]。触发的动作选择「当每日数据汇总后」，然后再将[对应的数据][更新到对应的列]即可。过程非常简单，就不再赘述了。
            - ![RSCT-Airtable-01](https://cdn.sspai.com/2018/01/20/00ec55cfc6bb9a7052353640b24b29e1.jpg)
        - 这里介绍一个使用 RescueTime 的[一个小技巧]，^^那就是最好[定期去][手动标记]相应应用的[效率属性]。^^首先，我们每天[浏览的大多数网页]或者[使用的应用]都是[比较固定的]，[手动标记][花费的时间不多]。其次，有一些应用对每个人的效率属性不一致。比如，我已经好多年没用 QQ 作为和别人的[聊天工具]了，所以凡是当使用 QQ 时，基本上都属于[处理工作上面的事情]，它对于我而言就是[效率状态]，而不是[消遣状态]。 #pt9-99.99
    - ### 通勤时间数据
        - Commute 表用来统计我的[通勤时间](((VmCQthGHf)))。每天，我都会选择地铁作为[上班通勤]的[主要交通工具]，虽然地铁[在站与站之间的运行时间]比较确定，但由于存在[换乘]，所以[每天的通勤时间的变化]就比较大了。打个比方，有时候早上只晚出发 5 分钟，如果[正好赶上一波高峰]，实际[到达公司的时间]往往会晚 20 分钟。所以，我[从年初就开始]每天记录自己的通勤时间，打算等到[数据累计到一定量之后]，通过[数据分析]得到自己每天的[合理出发时间]。
        - 在[记录通勤时间]的时候，由于准备[将数据保存到] Airtable，所以一开始就[直接就排除了]现有的[计时器]或者[第三方 App]，然后[把目标集中到] Workflow。但是，很快我就发现 Workflow 的[现有动作中]，并没有支持[在后台完成计时]的动作。后来，我就想到了[直接借助] Airtable [来完成这个功能]，这个功能的逻辑非常简单。流程如下：
210425-03:55
            - 每天[从家中出发]的时候，点击 workflow 将[此刻的时间]上传到 Airtable，并记为[出发时间]。
            - 当到达公司时，再次点击 Workflow 将时间上传到 Airtable 。由于 Airtable 本身可以使用[数据函数]，就能[计算出两个时间差]，并直接在我[第二次点击] Workflow 上传时间后，将[计算好的通勤时间][推送到手机上]。这样，既可以[实时看到][记录下来的通勤时间]，也不再需要二次过程将数据上传到 Airtable 中。
- ## 信息存档数据库
    - 信息存档数据库是用来保存我认为[有必要存档的][互联网数据]。其中，主要有三个 Tables，分别是：微博、博客以及稍后读。
    - 我喜欢[定期清空]自己的微博，防止在互联网上留下过多的「🌚 历史」。但又不想丢掉自己[转发过的微博]，于是就有了这个微博[存档表]。[存档微博]的方法非常简单，使用 IFTTT [新建一个动作]，实时将微博记录到 Airtable 中保存。
        - ![weibo-airtable-01](https://cdn.sspai.com/2018/01/20/490a16df19c502bcfcaa9f44fb77b34f.jpg)
    - 同样，我使用 [Pocket](https://getpocket.com/) 作为[稍后阅读工具]([[read it later (RIL)]])，也就通过创建 IFTTT 动作，将保存在 [[Pocket]] 中的文章[同步存档到] Airtable 中。
    - 除此之外，[博客][存档表]用来备份自己[在互联网上创作的内容]。比如在少数派写的文章以及自己的[博客文章]。该表单使用了自己编写的 [Python 脚本]，定期将我的博客文章以及[在少数派发表的文章]同步保存到 Airtable 中。
210425-11:57
- ## 其他数据库
    - 除了上面提到的这三个[主要的数据库]，我还有几个[自己比较喜欢的]数据库，也分享一下。
    - ### 票据存档数据库
        - 票据存档的数据库主要是记录平常[我认为比较重要的]收据、发票、[合同文件]等。当然，[超市购物小票]这类[不太重要的票据]也就[没必要存档]了。
        - ![Airtable-03](https://cdn.sspai.com/2018/01/20/57ef8b498ea1bec2c86ff2bc5ca73608.jpg)
    - ### 教育优惠统计数据库
        - 几个月前，我在少数派写过一篇 [《在校师生福利：Apple、微软、Adobe 等产品如何通过教育优惠购买》](https://sspai.com/post/39430) ，这篇文章中介绍一些[高校学生][可以享受的][教育优惠项目](((ztbubVpFG)))。不久前，我通过 Airtable 整理了一份[更加详细的]教育优惠表单，希望[更多的学生][能享受到][低价][有品质的服务]。
        - 你可以[通过检索的方式]来获取[自己感兴趣的]教育优惠项目。当然，我也[呼吁大家来一起][完善这个表单]。如果有一些教育优惠项目非常好，但表单中[未涉及到]，欢迎直接通过下面的链接[补充提交到表单中去]。
            - 表单链接：[「教育优惠项目」](https://airtable.com/shrRxkehT8l33lTva)
            - 完善表单：[「教育优惠应用提交」](https://airtable.com/shrFK5SNHOopuw5sq)
    - ### 菜品、餐馆统计数据库
        - 最近，我[正在完善的一个数据库][来源于]我[生活中的一个痛点]，那就是[经常不知道吃什么]。这个数据库中会记录下一些[餐馆和菜品]。我会将[平常吃过感觉不错的]，或者[想吃的餐馆]信息添加到餐馆数据表中，同时会记录一些做过或者[想做的菜品]。
            - 当我自己[想做菜吃的时候]，我就会通过 Workflow [随机返回]菜品[作为灵感]，而想出去吃的时候，也可以随机返回餐馆信息。目前，这个数据库和 Workflow 还没有完全做好，等完善之后，会同大家一起分享。
        - 另外，文中提到的一些[自动化数据获取]的 Python 脚本，我也会[整理后][择时]与少数派读者分享。
- ## 结语
    - 我其实[很早就知道] Airtable 了，但[真正有效地利用起来][也是近一年才开始的]。目前，虽然 Airtable [已经帮我][存下来不少的数据]，但是我对它的[利用程度][还并不满意]，今年我会[继续发掘] Airtable 的「正确使用方式」。
    - 如今，我们都知道[时常需要备份]自己的照片、手机、电脑，防止[资料丢失]。除此之外，我们[同样应该重视起]自己每天[产生的其他数据]。目前[初步建立起来的][数据集中收集模式]只是开始。等待[数据积累到一定量时]，就需要着手「数据集中分析」，使其[真正地能帮助自己][发现某个坏习惯]，提升一些效率，改变一些东西。
    - ( **本文「参与年度征文活动」**)
- ## comment
    - 你不觉得你的逻辑是[神逻辑]吗？你自己[记了那么多日记]，然后你[绝大多数不想看]，然后你就觉得量化你自己不好啦，然后你就觉得[量化自我]本身对大家对社会对个人都不好的吗？[那你有没有想过][可能就是你自己不适合](https://sspai.com/u/helloworld000/updates)量化自我啊😑
    - 速度比较慢。airtable 代码里用了一些谷歌的 [js 文件]之类 ，之前反应[官方客服]说的
